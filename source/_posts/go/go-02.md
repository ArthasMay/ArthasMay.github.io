---
title: 02 | Go语言基本教程
p: go/go-02
date: 2019-10-21 12:27:40
tags:
- Go
categories: Go
---

go1.8版本之后如果没有GOPATH使用默认

## 第一个go程序

### 应用程序入口
* 必须是 main 包: package main(目录可以不是main)
* 必须是 main 方法: func main.go
* 文件名不一定是 main.go

### 应用程序返回值
``` go
os.Exit(0)
```

### 应用程序的入参
```
os.Args[]
```

## 变量、常量与其他语言的差异

### 编写测试程序（类似于JUnit, 这里为了方便学习代码测试）
1. 源码文件以 _test 结尾： xxx_test.go
2. 测试方法名以 Test 开头： func TestXXX(t *testing.T) {...}

注意：
* go test -v xxx_test.go 才能输出 t.Log 里的文字
* 如果你使用的是 vs code 编辑器的话，安装好了go的相关配置，会在测试文件中看到 ` run test | debug test `的提示，你点击 `run test` 之后在下面看不到 `t.Log()` 输出的内容就请把 `"go.testFlags": ["-v"],` 这行代码加入到你的 settings.json 文件中（设置 Workspace Settings。打开 .vscode/settings.json）

### 变量的赋值

``` go
// 第一种写法
var a int = 1
var b int = 2
// 第二种写法
var (
  a int = 1
  b int = 2
)
// 第三种写法(自动类型推断)
a := 1
b := 2
```
go推崇简单的代码方式，选择一种就好了，第三种最简洁（但是会不会和swift一样有性能问题）

变量赋值与其他编程语言的区别
* 赋值可以进行自动类型判断
* 在一个赋值语句中可以对多个变量同时赋值

``` go
a, b = b, a
```

### 常量与其他编程语言的差异
* 快速设置连续值
``` go
const( 
  Monday = iota + 1
  Tuesday
  Wednesday
)

const (
  Readable = 1 << iota
  Writable
  Executable
)
```

## 数据类型

### 与其他编程语言的差异：
* Go语言不允许隐式类型转换（c/c++允许小类型向大的隐式转换）
* 别名和原有类型也不能进行隐式类型转换

``` go
package type_test

import "testing"

type MyInt = int64
func TestImplicit(t *testing.T)  {
	// var a int = 1
	var a int32 = 1
	var b int64
	// b = a
	b = int64(a)
	var c MyInt
	// c = b
	c = MyInt(b)
	t.Log(a, b, c)
}
```

### 预定义值在Math模块

### go的内存
go内存是垃圾回收的，但是为了高效，与支持指针

* 支持指针，但是不支持指针运算
* string是值类型，其默认的初始化值是空字符串

``` go
func TestPoint(t *testing.T)  {
	a := 1
	aPtr := &a
	// aPtr += 1
	t.Log(a, aPtr)
	t.Logf("%T %T", a, aPtr)
}

func TestString(t *testing.T)  {
	var s string
	t.Log("*" + s + "*")
	t.Log(len(s))
}
```

## 运算符

### 算数运算符

* 禁止了前置++，-- 自增自减的运算
* 用 == 比较数组
  * 相同维数且相同个数元素的数组才可以比较
  * 两个数组的元素都相等才相等

``` go
func TestCompareArray(t *testing.T)  {
	a := [...]int{1, 2, 3, 4}
	b := [...]int{1, 3, 4, 5}
	// c := [...]int{1, 2, 3, 4, 5}
	d := [...]int{1, 2, 3, 4}

	t.Log(a == b)
	t.Log(a == d)
}
```

### 位运算符
&^ 按位清零

``` go

```
