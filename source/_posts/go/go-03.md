---
title: 03 | Go语言的包依赖
p: go/go-03
date: 2019-11-03 23:09:31
tags:
- Go
categories: Go
---

### 引入外部包
1. 大驼峰的声明: func、struct、interface 可以被外部引用
2. 首字母为小写的声明为匿名的

* 记录声明的注释应该是完整的句子，即使这看起来有点多余。这种方法使它们在提取到 godoc 文档时格式良好。注释应以所述物品的名称开始，并以句号结束

[exported function xxx should have comment or be unexported解决方法](https://www.cnblogs.com/nnylee/p/11268526.html)

### 添加外部包（github上开源的包）

1. 添加当前目录到GOPATH: linux/unix(mac)的分隔符为 **':'**
`GOPATH="/home/www/gopath1:/home/www/gopath2"`
2. 导入github包的命令
`go get -u github.com/easierway/concurrent_map`

#### 注意

* go get 时默认安装到第一个GOPATH路径

### 依赖管理

#### Go依赖管理的缺陷

1. 同一环境下，无法做到不同项目使用同一包的不同版本
2. 无法管理对包的特定版本的依赖

#### 解决方法
Go 1.5 release版本之后引入了vendor目录

#### 常用的依赖管理工具
godep glide dep

#### go 1.11 的 go module

##### go modules命令

```go
go mod init
```

##### 自建包的依赖

由于使用go modules管理依赖，当前项目下自建的package(非main package的)的引入方式有两种
* 将当前项目的路径加入到GOPATH下(TODO: 未验证是否会与go modules冲突)
`import ("xxx") // 直接引入package的方式`
* 不加入GOPATH，package的管理方式使用go modules
`import ("{app}/xxx") // app是当前项目生成module(go mod init {app})时候配置名称`


